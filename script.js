document.addEventListener("DOMContentLoaded",function(){const d={selectors:{search:'[data-search="true"]',select:'[data-select="true"]',cmsItems:'[data-cms-items="true"] .w-dyn-item',checkboxes:'[data-checkboxes="true"] input[type="checkbox"]',searchTag:"[data-search-tag]",selectTag:"[data-select-tag]",checkboxTag:"[data-checkbox-tag]",sortSelect:'[data-sort-select="true"]',alphabeticalTag:"[data-sort-alphabetical-tag]",dateTag:"[data-sort-date-tag]"},sorting:{ascendingAlphabeticalSort:"data-ascending-sort",descendingAlphabeticalSort:"data-descending-sort",newestSort:"data-newest-sort",oldestSort:"data-oldest-sort"},itemsToShow:parseInt(document.querySelector('[data-cms-items="true"]')?.getAttribute("data-items-to-show")||"6",10),animation:{duration:document.querySelector('[data-cms-items="true"]')?.getAttribute("data-animation-duration")||"0.3s",easing:document.querySelector('[data-cms-items="true"]')?.getAttribute("data-animation-easing")||"ease-in-out"},scrollThreshold:parseInt(document.querySelector('[data-cms-items="true"]')?.getAttribute("data-scroll-threshold")||"100",10)},n={searchInput:document.querySelector(d.selectors.search),selectInput:document.querySelector(d.selectors.select),cmsItems:Array.from(document.querySelectorAll(d.selectors.cmsItems)),checkboxFilters:document.querySelectorAll(d.selectors.checkboxes),sortSelect:document.querySelector(d.selectors.sortSelect)};let h=d.itemsToShow,r=!1;function c(){const l=n.searchInput?n.searchInput.value.toLowerCase():"";let m=n.selectInput?n.selectInput.value.toLowerCase():"";n.selectInput&&!n.selectInput.options[n.selectInput.selectedIndex].hasAttribute("value")&&(m="");const Y=0<n.checkboxFilters.length?Array.from(n.checkboxFilters).filter(e=>e.checked).map(e=>document.querySelector(`label[for="${e.id}"]`).textContent.toLowerCase()):[];var e=n.cmsItems.map(e=>e.getBoundingClientRect());let u=0;n.cmsItems.forEach((e,t)=>{var a,s,o,r,n,c,i;a=e,s=l,o=m,r=Y,n=a.querySelector(d.selectors.searchTag),c=a.querySelector(d.selectors.selectTag),a=a.querySelector(d.selectors.checkboxTag),n=!n||n.textContent.toLowerCase().includes(s),s=!c||""===o||c.textContent.toLowerCase().includes(o),c=!a||0===r.length||r.includes(a.textContent.toLowerCase()),n&&s&&c?(i=e,u<h?(i.style.display="",setTimeout(()=>{i.style.opacity=1},50)):M(i),u++):M(e)}),i(e),r=u<=h}function M(e){e.style.display="none",e.style.opacity=0}function i(o){const r=n.cmsItems.map(e=>e.getBoundingClientRect());n.cmsItems.forEach((e,t)=>{var a=o[t],t=r[t],s=a.left-t.left;e.style.transform=`translate(${s}px, ${a.top-t.top}px)`,e.style.transition=`transform 0s, opacity ${d.animation.duration} `+d.animation.easing,e.getBoundingClientRect(),e.style.transform="",e.style.transition=`transform ${d.animation.duration} ${d.animation.easing}, opacity ${d.animation.duration} `+d.animation.easing})}function e(){const o=n.sortSelect.options[n.sortSelect.selectedIndex];var e=n.cmsItems.slice().sort((e,t)=>{var a=e.querySelector(d.selectors.alphabeticalTag).textContent.toLowerCase(),s=t.querySelector(d.selectors.alphabeticalTag).textContent.toLowerCase(),e=e.querySelector(d.selectors.dateTag),t=t.querySelector(d.selectors.dateTag);return"true"===o.getAttribute(d.sorting.ascendingAlphabeticalSort)?a.localeCompare(s):"true"===o.getAttribute(d.sorting.descendingAlphabeticalSort)?s.localeCompare(a):"true"===o.getAttribute(d.sorting.newestSort)?(s=l(e.textContent),a=l(t.textContent),s&&a?a-s:0):"true"===o.getAttribute(d.sorting.oldestSort)&&(a=l(e.textContent),s=l(t.textContent),a)&&s?a-s:0});const t=n.cmsItems[0].parentNode,a=t.style.overflow,s=(t.style.overflow="hidden",n.cmsItems[0].offsetHeight,n.cmsItems.map(e=>e.getBoundingClientRect()));e.forEach(e=>e.parentNode.appendChild(e)),n.cmsItems[0].offsetHeight,requestAnimationFrame(()=>{i(s),setTimeout(()=>{t.style.overflow=a},1e3*parseFloat(d.animation.duration))}),n.cmsItems=e,h=d.itemsToShow,r=!1,c()}function l(e){for(const a of["MMMM D, YYYY","MMMM D, YYYY h:mm A","MMMM D, YYYY H:mm","M/D/YYYY","M.D.YYYY","D.M.YYYY","M/D/YYYY h:mm A","M/D/YYYY H:mm","M.D.YYYY h:mm A","M.D.YYYY H:mm","D.M.YYYY h:mm A","D.M.YYYY H:mm","M/D/YY","M.D.YY","D.M.YY","M/D/YY h:mm A","M/D/YY H:mm","M.D.YY h:mm A","M.D.YY H:mm","D.M.YY h:mm A","D.M.YY H:mm","YYYY-MM-DD","YYYY-MM-DD h:mm a","YYYY-MM-DD H:mm","MMM D, YYYY","D MMM, YYYY","MMMM YYYY","MMM YYYY","MM/YYYY","D/M/YYYY H:mm","D/M/YYYY h:mm A","D/M/YY h:mm a","D/M/YY H:mm","MMMM D, YYYY H:mm","MMMM D, YYYY h:mm A","MMM D, YYYY H:mm","MMM D, YYYY h:mm A"]){var t=function(e,t){var a=t.split(/[\s/:.,-]+/),s=e.split(/[\s/:.,-]+/);if(a.length!==s.length)return null;let o=1,r=0,n=1970,c=0,i=0;var l={January:0,February:1,March:2,April:3,May:4,June:5,July:6,August:7,September:8,October:9,November:10,December:11,Jan:0,Feb:1,Mar:2,Apr:3,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};for(let e=0;e<a.length;e++){var m=a[e],Y=s[e];switch(m){case"D":case"DD":o=parseInt(Y,10);break;case"M":case"MM":r=parseInt(Y,10)-1;break;case"MMMM":case"MMM":if(void 0===(r=l[Y]))return null;break;case"YYYY":n=parseInt(Y,10);break;case"YY":n=2e3+parseInt(Y,10);break;case"H":case"HH":case"h":case"hh":c=parseInt(Y,10);break;case"mm":i=parseInt(Y,10);break;case"A":case"a":"pm"===Y.toLowerCase()&&c<12&&(c+=12),"am"===Y.toLowerCase()&&12===c&&(c=0);break;default:return null}}t=new Date(n,r,o,c,i);return isNaN(t.getTime())?null:t}(e,a);if(t&&!isNaN(t.getTime()))return t}return null}n.cmsItems.forEach((e,t)=>{e.style.transition=`opacity ${d.animation.duration} ${d.animation.easing}, transform ${d.animation.duration} `+d.animation.easing,e.style.transformOrigin="top center",t>=d.itemsToShow?(e.style.display="none",e.style.opacity=0):(e.style.display="",e.style.opacity=1)}),n.searchInput&&n.searchInput.addEventListener("input",c),n.selectInput&&n.selectInput.addEventListener("change",c),0<n.checkboxFilters.length&&n.checkboxFilters.forEach(e=>e.addEventListener("change",c)),n.sortSelect&&n.sortSelect.addEventListener("change",e),window.addEventListener("scroll",function(t,a){let s;return function(...e){clearTimeout(s),s=setTimeout(()=>t.apply(this,e),a)}}(function(){if(window.innerHeight+window.scrollY>=document.body.offsetHeight-d.scrollThreshold&&!r&&h<n.cmsItems.length){const e=n.cmsItems.slice(h,h+d.itemsToShow);e.forEach(e=>{e.style.display="",e.style.opacity=0}),setTimeout(()=>{e.forEach(e=>{e.style.opacity=1})},50),h=Math.min(h+d.itemsToShow,n.cmsItems.length),c()}},200)),c()});